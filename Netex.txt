# 🛰️ Netex Server ve Netex Sensör Kurulumu

> Bu doküman, Netex Server ve Netex Sensör bileşenlerinin Linux ortamında kurulumu için adım adım bir rehberdir.  
> ⚙️ Zabbix'in **LTS sürümünün kurulu olduğu** varsayılmıştır.

---

## 📦 PostgreSQL Kurulumu

```bash
sudo apt update
sudo apt install postgresql postgresql-contrib
Veritabanı sunucusuna bağlanalım:

bash
Kodu kopyala
sudo -u postgres psql
Kullanıcı ve veritabanı oluşturalım:

sql
Kodu kopyala
CREATE USER netex WITH PASSWORD '1';
CREATE DATABASE netex WITH OWNER netex;
Sonrasında \q ile çıkış yapabilirsiniz.

🧩 Netex Server Kurulumu
Kurulum, size verilen .deb dosyası ile yapılır:

bash
Kodu kopyala
sudo apt install ./netex-server-455-x64.deb -y
Root kullanıcısına geçelim:

bash
Kodu kopyala
sudo su
cd /opt/netex
.env dosyasını oluşturup düzenleyelim:

bash
Kodu kopyala
cp env.example .env
nano .env
⚙️ .env Dosyası Düzenleme
Storage Configuration kısmında, farklı isimlerde DB veya USER oluşturulmadıysa değişiklik yapmaya gerek yoktur.

Zabbix ayarları kısmında, Zabbix kurulumu sırasında kullandığınız kullanıcı adı, şifre ve Zabbix server IP’sini girin.

JWT Key için:

Liman’ın kurulu olduğu makinede aşağıdaki komutları çalıştırın:

bash
Kodu kopyala
sudo su
cd /liman/server
cat .env
Dosyanın sonunda JWT_SECRET değerini bulun ve .env dosyasındaki ilgili alana yapıştırın.

🧾 Örnek .env İçeriği
env
Kodu kopyala
# Storage Configuration @required
DB_HOST=127.0.0.1
DB_NAME=netex
DB_PASS=netex
DB_PORT=5432
DB_USER=netex

ZABBIX_USERNAME="<zabbix_username>"
ZABBIX_PASSWORD="<zabbix_password>"
ZABBIX_URL="http://<zabbix_ip_adresi>/zabbix/api_jsonrpc.php"
ZABBIX_SYNC="ON"

# Liman JWT Secret for http admin service usage @not-required
JWT_SECRET=<JWT_SECRET_BURAYA>
🔁 Servisleri Yeniden Başlatma ve Kontrol Etme
bash
Kodu kopyala
sudo systemctl restart netex@*
sudo systemctl status netex@*
🌐 Netex Sensör Kurulumu
Netex’in kurulu olduğu makinede aşağıdaki adımları izleyin:

bash
Kodu kopyala
sudo su
cd /opt/netex/clients
ls
Görünen listede sensör için gerekli .deb dosyasını kurun:

bash
Kodu kopyala
apt install ./netex-sensor-455-x64.deb -y
.env dosyasını düzenleyin:

bash
Kodu kopyala
nano /opt/netex-sensor/.env
🧾 Örnek Sensör .env İçeriği
env
Kodu kopyala
SERVER_URL="https://<netex_server_ip>:7782"
SENSOR_IP="<netex_server_ip>"
DNS_SERVER_URL="<DNS_server_ip>:53"
DEBUG_MODE="OFF"
PORT_MIRRORING_INTERFACE="ens18"

SOURCE_IP_KEY=8
DEST_IP_KEY=12
SOURCE_MAC_KEY=56
DEST_MAC_KEY=57
⚠️ Not: Lisans olmadığında netex-sensor çalışmayacaktır.

🧩 Netex’i Liman Arayüzüne Ekleme
Liman arayüzüne, Liman’ın kurulu olduğu IP adresinden erişin.

Sunucular ekranına gidin → Sunucu Ekle butonuna tıklayın.

Port numarasını bulmak için aşağıdaki komutu çalıştırın:

bash
Kodu kopyala
journalctl -u netex@* -f
Çıktıda port 7781 gibi bir değer göreceksiniz — bunu Liman arayüzünde ilgili alana girin.

Anahtar Türü kısmında Anahtarsız Giriş seçeneğini işaretleyin.

Sunucuyu ekledikten sonra, sol panelden sunucuya tıklayın → Eklentiler sekmesine geçin → Eklenti Ekle butonuna basın.

🧱 Etiketler
#postgres #monitoring #tutorial #linux #netex

✍️ Hazırlayan: Emineo
🗓️ Sürüm: 1.0
💻 Platform: Linux / Ubuntu
